# Default global values for dave.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

global:

  #nameOverride: ""
  fullnameOverride: "dave"

  serviceAccount:
    # Specifies whether a service account should be created
    create: true
    # Annotations to add to the service account
    annotations: {}
    # The name of the service account to use.
    # If not set and create is true, a name is generated using the fullname template
    name: ""

  extraEnvVars:
#    ## Default Timezone
#    - name: "TZ"
#      value: "Europe/Berlin"
#    ## Aktive Spring Profiles der Anwendung
#    - name: "SPRING_PROFILES_ACTIVE"
#      value: "dev"
#    ## Erhöhe Default JVM Metaspace Size (100 MB) um OutOfMemoryError - Metaspace zu verhindern
#    - name: "GC_MAX_METASPACE_SIZE"
#      value: "200"
#    ## Java Optionen der Anwendung
#    - name: "AVA_OPTS_APPEND"
#      value: ""
#    ## Namespace für Hazelcasst
#    - name: "APP_SPRING-SESSION-HAZELCAST_NAMESPACE"
#      value: "dave-external"
#    ## Elasticsearch
#    - name: "ELASTICSEARCH_PASSWORD"
#      value: "changeme"
#    - name: "ELASTICSEARCH_USER"
#      value: "elastic"
#    - name: "ELASTICSEARCH_HOST"
#      value: "dave-elasticsearch"
#    - name: "ELASTICSEARCH_PORT"
#      value: "9200"
    - name: "ELASTICSEARCH_REINDEX"
      value: "true"
    - name: "ELASTICSEARCH_SCHEME"
      value: "http"
    ## Reaction on Errors
    ## Spring
    ## Session timout in seconds; Goal: same lifetime as SSO Session (e.g. 10 hours)
    - name: "SPRING_SESSION_TIMEOUT"
      value: "3600"

## from zammad:
elasticsearch:
  global:
    storageClass: "thin-csi"
  sysctlImage:
    enabled: false
  master:
    resources:
      limits:
        cpu: 2
        memory: 1Gi
      requests:
        cpu: 100m
        memory: 1Gi
    podSecurityContext:
      enabled: false
    containerSecurityContext:
      enabled: false
    replicaCount: 1
  coordinating:
    replicaCount: 0
  data:
    replicaCount: 0
  ingest:
    replicaCount: 0
  ##
  user: elastic
  password: pwd_elastic


## from dave-c:
admin-portal:
  extraEnvVars:
    HAZELCAST_GROUP_NAME: dave-adminportal-apigateway-service-session_replication_group
    HAZELCAST_INSTANCE: dave-adminportal-apigateway-service-hazl_instance
    HAZELCAST_OPENSHIFT_SERVICE_NAME: dave-adminportal-apigateway-service
    JAVA_OPTIONS: -Djavax.net.ssl.trustStore=/mnt/cacerts-lhm -Djavax.net.ssl.trustStorePassword=changeit
      --add-modules java.se --add-exports java.base/jdk.internal.ref=ALL-UNNAMED --add-opens
      java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.nio=ALL-UNNAMED --add-opens
      java.base/sun.nio.ch=ALL-UNNAMED --add-opens java.management/sun.management=ALL-UNNAMED
      --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED
      -Dhz.integritychecker.enabled=false
    JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8 -Dhz.integritychecker.enabled=false
    SERVER_PORT: "8080"
    SPRING_PROFILES_ACTIVE: dev
  route:
    enabled: true
    targetPort: service
  fullnameOverride: dave-adminportal-apigateway-service

backend:
  extraEnvVars:
    env:
      GC_MAX_METASPACE_SIZE: "256"
      HAZELCAST_GROUP_NAME: dave-backend-service-hazl_group
      HAZELCAST_INSTANCE: dave-backend-service-hazl_instance
      HAZELCAST_OPENSHIFT_SERVICE_NAME: dave-backend-service
      JAVA_OPTIONS: -Djavax.net.ssl.trustStore=/mnt/cacerts-lhm -Djavax.net.ssl.trustStorePassword=changeit
        -Xmx1g --add-modules java.se --add-exports java.base/jdk.internal.ref=ALL-UNNAMED
        --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.nio=ALL-UNNAMED
        --add-opens java.base/sun.nio.ch=ALL-UNNAMED --add-opens java.management/sun.management=ALL-UNNAMED
        --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED"
        -Dhz.integritychecker.enabled=false
      JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8 -Dhz.integritychecker.enabled=false
      SERVER_PORT: "8080"
      SPRING_PROFILES_ACTIVE: dev
      TOMCAT_GRACEFULSHUTDOWN_PRE_WAIT_SECONDS: "40"
    email:
      DAVE_EMAIL_ADDRESS: ex.bayr@muenchen.de
      DAVE_EMAIL_RECEIVER_CUT_EMAIL_BODY_LINE_BEGINS_WITH_STRINGS: 'Von:;Gesendet:'
      DAVE_EMAIL_RECEIVER_CUT_EMAIL_BODY_LINE_CONTAINS_STRINGS: Landeshauptstadt München;Schuh&Co.GmbH;-----Ursprüngliche Nachricht-----;dave-dev@muenchen.de
      DAVE_EMAIL_RECEIVER_UPDATE_INTERVAL: "30000"
  credentials:
    SPRING_DATASOURCE_URL: jdbc:postgresql://dave-postgresql:5432/dave_db
    SPRING_DATASOURCE_USERNAME: dave
    SPRING_DATASOURCE_PASSWORD: dave_pwd
    DAVE_EMAIL_PASSWORD: pwd-email
    ELASTICSEARCH_HOST: dave-elasticsearch
    ELASTICSEARCH_PASSWORD: pwd_elastic
  route:
    enabled: true
    targetPort: service
  fullnameOverride: dave-backend-service

eai:
  extraEnvVars:
    GC_MAX_METASPACE_SIZE: "256"
    JAVA_OPTIONS: -Djavax.net.ssl.trustStore=/mnt/cacerts-lhm -Djavax.net.ssl.trustStorePassword=changeit -Xmx512m
    JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8
    MANAGEMENT_SERVER_PORT: "8079"
    SERVER_PORT: "8080"
    SPRING_PROFILES_ACTIVE: dev
  route:
    enabled: true
    targetPort: service
  fullnameOverride: dave-eai-service

frontend:
  extraEnvVars:
    HAZELCAST_GROUP_NAME: dave-frontend-apigateway-service-session_replication_group
    HAZELCAST_INSTANCE: dave-frontend-apigateway-service-hazl_instance
    HAZELCAST_OPENSHIFT_SERVICE_NAME: dave-frontend-apigateway-service
    JAVA_OPTIONS: -Djavax.net.ssl.trustStore=/mnt/cacerts-lhm -Djavax.net.ssl.trustStorePassword=changeit
      --add-modules java.se --add-exports java.base/jdk.internal.ref=ALL-UNNAMED --add-opens
      java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.nio=ALL-UNNAMED --add-opens
      java.base/sun.nio.ch=ALL-UNNAMED --add-opens java.management/sun.management=ALL-UNNAMED
      --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED
    JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8
    SERVER_PORT: "8080"
    SPRING_PROFILES_ACTIVE: dev
  route:
    enabled: true
    targetPort: service
  fullnameOverride: dave-frontend-apigateway-service

selfservice-portal:
  extraEnvVars:
    HAZELCAST_GROUP_NAME: dave-selfserviceportal-apigateway-service-session_replication_group
    HAZELCAST_INSTANCE: dave-selfserviceportal-apigateway-service-hazl_instance
    HAZELCAST_OPENSHIFT_SERVICE_NAME: dave-selfserviceportal-apigateway-service
    JAVA_OPTIONS: -Djavax.net.ssl.trustStore=/mnt/cacerts-lhm -Djavax.net.ssl.trustStorePassword=changeit
      --add-modules java.se --add-exports java.base/jdk.internal.ref=ALL-UNNAMED --add-opens
      java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.nio=ALL-UNNAMED --add-opens
      java.base/sun.nio.ch=ALL-UNNAMED --add-opens java.management/sun.management=ALL-UNNAMED
      --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED
    JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8
    SERVER_PORT: "8080"
    SPRING_PROFILES_ACTIVE: dev 
  route:
    enabled: true
    targetPort: service
  fullnameOverride: dave-selfserviceportal-apigateway-service

## postgresql
postgresql:   
  auth:
    username: dave
    password: dave_pwd
    database: dave_db
  primary:
    containerSecurityContext:
      enabled: false
    podSecurityContext:
      enabled: false
    persistence:
      storageClass: "thin-csi"
